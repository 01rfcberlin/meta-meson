From 296962a562b5b5784672d8c4ac49ed868cc5538a Mon Sep 17 00:00:00 2001
From: changzhijie <elecboy@126.com>
Date: Wed, 2 Jun 2021 10:04:57 +0800
Subject: [PATCH 7/7] qihua-s905d3 add sdio irq pin

---
 arch/arm64/boot/dts/amlogic/meson-g12-common.dtsi   | 8 ++++++++
 arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/amlogic/meson-g12-common.dtsi b/arch/arm64/boot/dts/amlogic/meson-g12-common.dtsi
index 9b0dea5f71f3..9a2d2daa0ef7 100644
--- a/arch/arm64/boot/dts/amlogic/meson-g12-common.dtsi
+++ b/arch/arm64/boot/dts/amlogic/meson-g12-common.dtsi
@@ -985,6 +985,14 @@ mux {
 						};
 					};
 
+                                        sdio_irq_pins: sdio_irq {
+                                                mux {
+                                                        groups = "sdio_irq";
+                                                        function = "sdio";
+                                                        bias-disable;
+                                                };
+                                         };
+
 					spdif_in_a10_pins: spdif-in-a10 {
 						mux {
 							groups = "spdif_in_a10";
diff --git a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
index 0db5b1a34149..173bc6f6eb89 100644
--- a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
+++ b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
@@ -367,7 +367,7 @@ &saradc {
 /* SDIO */
 &sd_emmc_a {
 	status = "okay";
-	pinctrl-0 = <&sdio_pins>;
+	pinctrl-0 = <&sdio_pins>, <&sdio_irq_pins>;
 	pinctrl-1 = <&sdio_clk_gate_pins>;
 	pinctrl-names = "default", "clk-gate";
 	#address-cells = <1>;
-- 
2.25.1

