From 3d15fb8414a20d99ff6f6953472e6b9584f7dbcf Mon Sep 17 00:00:00 2001
From: changzhijie <elecboy@126.com>
Date: Wed, 2 Jun 2021 16:22:55 +0800
Subject: [PATCH 6/7] qihua-s905d3 fix led and kbd

---
 .../boot/dts/amlogic/meson-qihua-s905d3.dtsi  | 26 +++----------------
 1 file changed, 4 insertions(+), 22 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
index b1be0da8803f..02bf1af6a224 100644
--- a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
+++ b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
@@ -40,16 +40,12 @@ button-function {
 	leds {
 		compatible = "gpio-leds";
 
-		led-white {
-			label = "vim3:white:sys";
-			gpios = <&gpio_ao GPIOAO_4 GPIO_ACTIVE_HIGH>;
+		led-red {
+			label = "x905:red:sys";
+			gpios = <&gpio_ao GPIOAO_11 GPIO_ACTIVE_HIGH>;
 			linux,default-trigger = "heartbeat";
 		};
 
-		led-red {
-			label = "vim3:red";
-			gpios = <&gpio_expander 5 GPIO_ACTIVE_HIGH>;
-		};
 	};
 
 	emmc_pwrseq: emmc-pwrseq {
@@ -64,7 +60,7 @@ gpio-keys-polled {
 		power-button {
 			label = "power";
 			linux,code = <KEY_POWER>;
-			gpios = <&gpio_ao GPIOAO_7 GPIO_ACTIVE_LOW>;
+			gpios = <&gpio_ao GPIOAO_3 GPIO_ACTIVE_LOW>;
 		};
 	};
 
@@ -321,20 +317,6 @@ &i2c_AO {
 	pinctrl-0 = <&i2c_ao_sck_pins>, <&i2c_ao_sda_pins>;
 	pinctrl-names = "default";
 
-	khadas_mcu: system-controller@18 {
-		compatible = "khadas,mcu";
-		reg = <0x18>;
-		#cooling-cells = <2>;
-	};
-
-	gpio_expander: gpio-controller@20 {
-		compatible = "ti,tca6408";
-		reg = <0x20>;
-		vcc-supply = <&vcc_3v3>;
-		gpio-controller;
-		#gpio-cells = <2>;
-	};
-
 	rtc@51 {
 		compatible = "haoyu,hym8563";
 		reg = <0x51>;
-- 
2.25.1

