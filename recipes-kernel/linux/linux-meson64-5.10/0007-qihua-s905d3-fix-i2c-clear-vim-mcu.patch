From 9ac77af84e8b1b70ab3cc0c6abed1b921788ff21 Mon Sep 17 00:00:00 2001
From: changzhijie <elecboy@126.com>
Date: Wed, 2 Jun 2021 16:56:55 +0800
Subject: [PATCH 7/7] qihua-s905d3 fix i2c, clear vim mcu

---
 .../boot/dts/amlogic/meson-qihua-s905d3.dtsi  | 37 +++++++++++--------
 1 file changed, 21 insertions(+), 16 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
index 02bf1af6a224..64667781e466 100644
--- a/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
+++ b/arch/arm64/boot/dts/amlogic/meson-qihua-s905d3.dtsi
@@ -13,6 +13,7 @@ / {
 	aliases {
 		serial0 = &uart_AO;
 		ethernet0 = &ethmac;
+		i2c0 = &i2c3;
 	};
 
 	chosen {
@@ -253,12 +254,6 @@ cpu_active: cpu-active {
 		};
 	};
 
-	cooling-maps {
-		map {
-			trip = <&cpu_active>;
-			cooling-device = <&khadas_mcu THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
-		};
-	};
 };
 
 &ext_mdio {
@@ -312,16 +307,26 @@ hdmi_tx_tmds_out: endpoint {
 	};
 };
 
-&i2c_AO {
-	status = "okay";
-	pinctrl-0 = <&i2c_ao_sck_pins>, <&i2c_ao_sda_pins>;
-	pinctrl-names = "default";
-
-	rtc@51 {
-		compatible = "haoyu,hym8563";
-		reg = <0x51>;
-		#clock-cells = <0>;
-	};
+&i2c3 {
+       /* default i2c clock-frequency is 100Khz */
+       status = "okay";
+
+       /*
+        *               : SDA(GPIOA.14->152 Pin)
+        *                 SCL(GPIOA.15->154 Pin)
+        */
+       pinctrl-names = "default";
+       pinctrl-0 = <&i2c3_sck_a_pins>, <&i2c3_sda_a_pins>;
+
+       /* default 100k */
+       clock-frequency = <100000>;
+
+       pcf8563: rtc@51 {
+	       status = "okay";
+               compatible = "nxp,pcf8563";
+               reg = <0x51>;
+               #clock-cells = <0>;
+       };
 };
 
 &ir {
-- 
2.25.1

